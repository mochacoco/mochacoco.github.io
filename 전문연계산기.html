<html><head>
    <link href="../CSS/calcLevelUp.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <style type="text/css">
          tr:hover { background-color: lightyellow; }
      </style>
    <script src="../data/expTable.js"></script>
    <script src="../js/calcLevelUp.js"></script>
    <script src="../data/mob_exp.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
function calc_single(start, end){
	const time0 = start;
	const time1 = end;
	
	const date0 = new Date(`1970-01-01T${time0}Z`);
	const date1 = new Date(`1970-01-01T${time1}Z`);
	
	var timediff1 = date1 - date0;
	if (timediff1 >= 4 * 60 * 60 * 1000){
	timediff1 = timediff1 - 1 * 60 * 60 * 1000;
}
	if (timediff1 >= 12 * 60 * 60 * 1000){
	timediff1 = timediff1 - 0.5 * 60 * 60 * 1000;
}
	
	var hour1 = Math.floor(timediff1 / (1000 * 60 * 60));
	
	var min1 = Math.floor((timediff1 % (1000 * 60 * 60)) / (1000 * 60));
	var timeInterval = `${hour1 < 10 ? '0' : ''}${hour1}:${min1 < 10 ? '0' : ''}${min1}`;

return timediff1
}
</script>


    <title>전문연 근무 시간 계산기</title>
  </head>
  <body style="text-align: center">
    <br>
    <h2>전문연 근무 시간 계산기</h2>
    <br>

    <div style="
        display: flex;
        flex-wrap: wrap;
        text-align: center;
        justify-content: center;
      ">
    <div style="width: 460px; margin-right: 1rem">
      <table class="table">
        <thead>
          <tr>
            <th scope="col"></th>
            <th scope="col" style="text-align: center">근무유형</th>
            <th scope="col" style="text-align: center">세부</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              
            </td>
            <td>기준출근</td>
            <td>
            <input type="time" class="form-control" id="start_time" style="width: 200px" value="09:00:00" min="06:00:00" max="11:00:00"></td>
          </tr>
          <tr>
            <td>
              
            </td>
            <td>병가 사용</td>
            <td>
              <select id="exp_weather" class="form-select" aria-label="Default select example" style="width: 200px" onchange="
                var total_additional_exp = get_total_additional_exp();
                additional_exp = document.getElementById(&quot;exp_weather&quot;).value;
                document.getElementById(&quot;total_additional_exp&quot;).innerHTML = calc_additional_exp(additional_exp, &quot;exp_weather_rate&quot;);
                ">
                <option selected="" value="0">없음</option>
                <option value="50">있음</option>
              </select>
            </td>
          </tr>
          <tr>
            <td>
              
            </td>
            <td>연가 사용</td>
            <td>
              <select id="exGold" class="form-select" aria-label="Default select example" style="width: 200px" onchange="
                var total_additional_exp = get_total_additional_exp();
                additional_exp = document.getElementById(&quot;exGold&quot;).value;
                document.getElementById(&quot;total_additional_exp&quot;).innerHTML = calc_additional_exp(additional_exp, &quot;ex_gold_rate&quot;);
                ">
                <option selected="" value="0">없음</option>
                <option value="10">있음</option>
              </select>
            </td>
          </tr>
          
          
          
        </tbody>
      </table>
    </div>
    
      <div style="width: 460px; margin-right: 1rem">
        <div style="width: 460px">
          <table class="table">
            <thead>
              <tr>
                <th colspan="2" style="text-align: center">퇴근 시각</th>
              </tr>
            </thead>
            <tbody>
              <tr style="vertical-align: middle">
                <td>월요일</td>
                <td>
                  <input type="time" class="form-control" id="end_mon" style="width: 200px" value="18:00:00" min="12:00:00" max="23:59:00">
                </td>
              </tr>
              <tr>
                <td>화요일</td>
                <td>
                  <input type="time" class="form-control" id="end_tues" style="width: 200px" value="18:00:00" min="12:00:00" max="23:59:00">
                </td>
              </tr>
              
              <tr>
                <td>수요일</td>
                <td>
                  <input type="time" class="form-control" id="end_wed" style="width: 200px" value="18:00:00" min="12:00:00" max="23:59:00">
                </td>
              </tr>
              <tr>
                <td>목요일</td>
                <td>
                  <input type="time" class="form-control" id="end_thurs" style="width: 200px" value="18:00:00" min="12:00:00" max="23:59:00">
                </td>
              </tr>
              <tr>
                <td>금요일</td>
                <td>
                  <input type="time" class="form-control" id="end_fri" style="width: 200px" value="18:00:00" min="12:00:00" max="23:59:00"></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div style="width: 460px">
          <table class="table">
            <thead>
              <tr>
                <th colspan="2" style="text-align: center; width: 250px">
                  계산 결과
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>근무 시간 누계</td>
                <td style="width: 250px">
                  <pre class="nomargin" id="amount_mob" style="font-size: 16px"></pre>
                </td>
              </tr>
              
              
              
            </tbody>
          </table>
        </div>
        <div class="d-grid gap-2">
          <button type="button" class="btn btn-success" onclick="
	
	const timeInterval1 = calc_single(document.getElementById(&quot;start_time&quot;).value, document.getElementById(&quot;end_mon&quot;).value);
const timeInterval2 = calc_single(document.getElementById(&quot;start_time&quot;).value, document.getElementById(&quot;end_tues&quot;).value);
const timeInterval3 = calc_single(document.getElementById(&quot;start_time&quot;).value, document.getElementById(&quot;end_wed&quot;).value);
const timeInterval4 = calc_single(document.getElementById(&quot;start_time&quot;).value, document.getElementById(&quot;end_thurs&quot;).value);
const timeInterval5 = calc_single(document.getElementById(&quot;start_time&quot;).value, document.getElementById(&quot;end_fri&quot;).value);
	var total = timeInterval1 + timeInterval2 + timeInterval3 + timeInterval4 + timeInterval5;

	var hour1 = Math.floor(total / (1000 * 60 * 60));
	var min1 = Math.floor((total % (1000 * 60 * 60)) / (1000 * 60));
	timespent = `${hour1 < 10 ? '0' : ''}${hour1}:${min1 < 10 ? '0' : ''}${min1}`;
document.getElementById(&quot;amount_mob&quot;).innerHTML = String(timespent);
	if (timeInterval1 <= 4 * 60 * 60 * 1000){
document.getElementById(&quot;amount_mob&quot;).innerHTML = &quot; 월요일 근무시간 부족&quot;;}
if (timeInterval2 <= 4 * 60 * 60 * 1000){
document.getElementById(&quot;amount_mob&quot;).innerHTML = &quot; 화요일 근무시간 부족&quot;;}
if (timeInterval3 <= 4 * 60 * 60 * 1000){
document.getElementById(&quot;amount_mob&quot;).innerHTML = &quot; 수요일 근무시간 부족&quot;;}
if (timeInterval4 <= 4 * 60 * 60 * 1000){
document.getElementById(&quot;amount_mob&quot;).innerHTML = &quot; 목요일 근무시간 부족&quot;;}
if (timeInterval5 <= 4 * 60 * 60 * 1000){
document.getElementById(&quot;amount_mob&quot;).innerHTML = &quot; 금요일 근무시간 부족&quot;;}


            
            
            ">
            계산
          </button>
        </div>
        <br>
      </div>
      
    <div id="value_collect">
    <input id="default_rate" type="hidden" value="0">
    <input id="exp_coupon_rate" type="hidden" value="0">
    <input id="exp_weather_rate" type="hidden" value="0">
    <input id="ex_gold_rate" type="hidden" value="0">
    <input id="exp_potion_rate" type="hidden" value="0">
    <input id="zero_rate" type="hidden" value="0">
    <input id="elf_rate" type="hidden" value="0">
    <input id="pendant_rate" type="hidden" value="0">
    <input id="ring_rate" type="hidden" value="0">
    <input id="burning_rate" type="hidden" value="0">
    <input id="hyper_rate" type="hidden" value="0">
    <input id="union_rate" type="hidden" value="0">
    <input id="user_rate" type="hidden" value="0">
    <input id="roon_rate" type="hidden" value="0">
    <input id="loaded_rate" type="hidden" value="0">
    <input id="pc_rate" type="hidden" value="0">
    <input id="mob_level" type="hidden" value="0">
    </div>

    <script>
      document.addEventListener('click',function(e){
        if(e.target.id == "mob_tr_child"){
          mother = e.target.parentNode;
          mother = mother.value
          mother = mother.split(",")
          let mob_exp = mother[1]
          document.getElementById("mob_exp").value = mob_exp;
          document.getElementById("mob_level").value = mother[0]
        }
      });
    </script>
    </div>
  

</body></html>